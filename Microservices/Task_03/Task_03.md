## Домашнее задание к занятию «Микросервисы: подходы» ДОРАБОТКА

### Задача 3: Мониторинг
Предложите решение для обеспечения сбора и анализа состояния хостов и сервисов в микросервисной архитектуре. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:

* сбор метрик со всех хостов, обслуживающих систему;
* сбор метрик состояния ресурсов хостов: CPU, RAM, HDD, Network;
* сбор метрик потребляемых ресурсов для каждого сервиса: CPU, RAM, HDD, Network;
* сбор метрик, специфичных для каждого сервиса;
* пользовательский интерфейс с возможностью делать запросы и агрегировать информацию;
* пользовательский интерфейс с возможностью настраивать различные панели для отслеживания состояния системы.


* Обоснуйте свой выбор.

* решение:

Для обеспечения сбора и анализа состояния хостов и сервисов можно использовать следующее решение:

#### Prometheus для сбора метрик:
* Prometheus позволяет собирать метрики со всех хостов и сервисов.
* Для сбора метрик состояния ресурсов хостов (CPU, RAM, HDD, Network) можно использовать экспортеры, такие как Node Exporter.
* Для сбора метрик потребляемых ресурсов для каждого сервиса и специфичных метрик можно создать экспортеры или использовать уже существующие, если они доступны.

#### Grafana для визуализации метрик:
* Grafana обеспечивает пользовательский интерфейс для запросов и агрегирования информации.
* Grafana позволяет настраивать различные панели для отслеживания состояния системы.

Обоснование:

Prometheus и Grafana широко используются сообществом для мониторинга и визуализации метрик. 
Prometheus обладает хорошей производительностью и легкостью в настройке, позволяя собирать разнообразные метрики. 
Grafana обеспечивает удобный интерфейс для визуализации метрик и создания настраиваемых панелей.

### Конец задачи № 3


Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры. Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

### Задача 1: Обеспечить разработку
Предложите решение для обеспечения процесса разработки: хранение исходного кода, непрерывная интеграция и непрерывная поставка. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:

* облачная система;
* система контроля версий Git;
* репозиторий на каждый сервис;
* запуск сборки по событию из системы контроля версий;
* запуск сборки по кнопке с указанием параметров;
* возможность привязать настройки к каждой сборке;
* возможность создания шаблонов для различных конфигураций сборок;
* возможность безопасного хранения секретных данных (пароли, ключи доступа);
* несколько конфигураций для сборки из одного репозитория;
* кастомные шаги при сборке;
* собственные докер-образы для сборки проектов;
* возможность развернуть агентов сборки на собственных серверах;
* возможность параллельного запуска нескольких сборок;
* возможность параллельного запуска тестов.


Обоснуйте свой выбор.

* решение:
 
Для обеспечения процесса разработки, хранения исходного кода, непрерывной интеграции и поставки я бы использовал следующее решение:

#### GitLab
- Облачная система контроля версий Git с встроенным CI/CD:
- GitLab позволяет создавать репозитории для каждого сервиса.
- Запуск сборки происходит по событию из системы контроля версий или по кнопке с указанием параметров.
- Возможность привязать настройки к каждой сборке и создавать шаблоны для различных конфигураций сборок.
- Несколько конфигураций для сборки из одного репозитория поддерживаются.
- Собственные докер-образы для сборки проектов могут быть использованы и опубликованы в GitLab Container Registry.
- Параллельный запуск нескольких сборок и тестов поддерживается.

Обоснование:

GitLab предоставляет все необходимые инструменты для реализации процесса CI/CD, 
начиная от хранения исходного кода до автоматической поставки приложения. 
Его интегрированная система CI/CD обеспечивает удобство и гибкость настройки, 
позволяя управлять всеми этапами разработки и поставки в одной системе. 
Кроме того, GitLab имеет открытый и активно развивающийся экосистему, 
что обеспечивает поддержку широкого спектра интеграций и расширений.


### Задача 2: Логи
Предложите решение для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:

* сбор логов в центральное хранилище со всех хостов, обслуживающих систему;
* минимальные требования к приложениям, сбор логов из stdout;
* гарантированная доставка логов до центрального хранилища;
* обеспечение поиска и фильтрации по записям логов;
* обеспечение пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов;
* возможность дать ссылку на сохранённый поиск по записям логов.


Обоснуйте свой выбор.

* решение:

Для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре рекомендуется использовать следующее решение:

#### Elastic Stack (Elasticsearch, Logstash, Kibana):
- FileBeat - агент, собирающий данные с машины и направляющий в Elasticsearch.
- Logstash - это компонент стека ELK, который представляет собой конвейер по парсингу логов событий одновременно из множества источников ввода и их обработке для дальнейшего использования в Elasticsearch.
- Elasticsearch - используется в качестве центрального хранилища логов, обеспечивая гибкий и масштабируемый поиск и анализ.
- Kibana - предоставляет пользовательский интерфейс для поиска, фильтрации и визуализации логов, а также управления доступом для разработчиков.

Обоснование:

Elastic Stack предоставляет все необходимые инструменты для сбора, хранения, анализа и визуализации логов в микросервисной архитектуре. 
Elasticsearch обеспечивает масштабируемое и быстрое хранение логов, 
Logstash гарантирует их надежную доставку, а Kibana предоставляет удобный интерфейс для работы с логами. 
Elastic Stack также позволяет создавать сохраненные поиски и давать ссылки на них, что удовлетворяет требованиям по доступу разработчиков к логам.

## END